<?php
    use App\Article;
?>

<?php $__env->startSection('sidebar'); ?>
@parent
<?php echo $__env->make('layout.sidebar', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>
        <!-- page start-->
<div class="row">
    <div class="col-lg-12">
        <section class="panel">
            <header class="panel-heading">
                <?php echo e($pageTitle); ?>

                <?php /*<a class="btn-sm btn-info pull-right" data-toggle="modal" href="#addData" title="Add">
                    <strong>Add Article</strong>
                </a>*/ ?>
                <a href="<?php echo e(route('article-add_index')); ?>" class="btn-sm btn-info pull-right" data-toggle="modal">Add Article/Page</a>
            </header>


             <?php if($errors->any()): ?>
                 <div class="alert alert-danger">
                     <?php foreach($errors->all() as $error): ?>
                         <p><?php echo e($error); ?></p>
                     <?php endforeach; ?>
                 </div>
             <?php endif; ?>

            <?php if(Session::has('flash_message')): ?>
                <div class="alert alert-success">
                    <p><?php echo e(Session::get('flash_message')); ?></p>
                </div>
            <?php endif; ?>
            <?php if(Session::has('flash_message_error')): ?>
                <div class="alert alert-danger">
                    <p><?php echo e(Session::get('flash_message_error')); ?></p>
                </div>
            <?php endif; ?>

            <div class="panel-body">
                <div class="adv-table">

                    <?php /*------------ DB :Filter -----------------------------------------*/ ?>
                    <?php echo Form::open(['route' => 'article-index']); ?>


                    <div  class="col-lg-3 pull-left" >
                        <div class="input-group input-group-sm">
                            <?php echo Form::text('search_term', Input::old('search_term'), ['id'=>'search_term','placeholder'=>'Search by title','class' => 'form-control','required']); ?>

                            <span class="input-group-btn">
                               <button class="btn btn-info btn-flat" type="submit" >Search</button>
                                <?php /*<button type="button" class="btn sr-btn"><i class="icon-search"></i></button>*/ ?>
                            </span>
                        </div>
                    </div>
                    <?php echo Form::close(); ?>



                    <table  class="display table table-bordered table-striped" id="data-table-example">
                        <thead>
                        <tr>
                            <th> Title </th>
                            <th>Sub Page</th>
                            <th> Status </th>
                            <th> Action </th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php if(isset($data)): ?>
                            <?php foreach($data as $values): ?>
                                <tr class="gradeX">
                                    <td><?php echo e($values->title); ?></td>
                                    <td><?php echo e(@$values->relSubpage->title); ?></td>
                                    <td><?php echo e($values->status); ?></td>
                                    <td>
                                        <a href="<?php echo e(route('article-show', $values->slug)); ?>" class="btn btn-info btn-xs" data-toggle="modal" data-target="#etsbModal" title="View"><i class="icon-eye-open"></i></a>
                                        <a href="<?php echo e(route('article-edit', $values->slug)); ?>" class="btn btn-primary btn-xs" data-toggle="modal" <?php /*data-target="#etsbModal" */ ?>title="Edit"><i class="icon-edit"></i></a>
                                        <a href="<?php echo e(route('article-delete', $values->slug)); ?>" class="btn btn-danger btn-xs" onclick="return confirm('Are you sure to Delete?')" title="Delete"><i class="icon-trash"></i></a>
                                    </td>
                                </tr>
                            <?php endforeach; ?>
                        <?php endif; ?>
                    </table>
                    <span class="pull-right"><?php echo str_replace('/?', '?', $data->render()); ?> </span>
                </div>
            </div>
        </section>
    </div>
</div>
<!-- page end-->


<!-- addData -->
<div class="modal fade " id="addData" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content ">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Add Article</h4>
            </div>
            <div class="modal-body">
                <?php echo Form::open(['route' => 'article-store','files'=>'true']); ?>

                   <?php echo $__env->make('article._form', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>
                <?php echo Form::close(); ?>


            </div>

        </div>
    </div>
</div>
<!-- modal -->


<!-- Modal  -->
<div class="modal fade" id="etsbModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
</div>
<!-- modal -->

<!-- View image for media in Modal  -->
<div class="modal fade" id="imageView" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="background-color: #1a1a1a; margin: 0 auto; opacity: 0.9">
</div>
<!-- modal -->


<!--script for this page only-->
<?php if($errors->any()): ?>
    <script type="text/javascript">
        $(function(){
            $("#addData").modal('show');
        });
    </script>
<?php endif; ?>



<?php $__env->stopSection(); ?>
<?php echo $__env->make('layout.master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>